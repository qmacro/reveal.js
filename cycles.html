<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Cycle Overview</title>

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/bluefin.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->

		<style>
			p.story { color: #eeddee; font-size: 75%; !important}
			span.actor, span.action, span.result { color: white; font-style: italic; !important}

		</style>

	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">

				<section>
					<h1>Cycle Overview</h1>
					<h3>Overview of Planned Story Work in Remaining Cycles</h3>
					<p>
						<small>Feb 2013</small>
					</p>
				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/none

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
					// { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

		<script type="text/javascript" src="/shed/js/jquery-1.9.1.min.js"></script>
		<script type="text/javascript" src="/shed/cycledata.js"></script>

		<script type="text/javascript">




      Reveal.addEventListener('ready', function(event){

      	// Process by cycle (2, 3, 4)
      	[2, 3, 4].forEach(function(cycle, i) {

      		// ---------
      		// C Y C L E 
      		// ---------

  				var $section = $("<section id='CYCLE-" + cycle + "'>");
  				var $sectionheader = $("<section class='cycle'></section>");
      	  $sectionheader.append("<h1>Cycle " + cycle + "</h1><p><span class='flow'></span></p>");
  				$section.append($sectionheader);


      		// Collect the cycle stories by category
      		categoryStories = {};

      		// Filter the stories to get those for the current cycle
      		stories.filter(function(s) {
      			return s.cycle == cycle;

      		// Arrange the filtered stories by category
      		}).forEach(function(story, i) {
      			if (categoryStories.hasOwnProperty(story.category)) {
      				categoryStories[story.category].push(story);
      		  }
      		  else {
      		  	categoryStories[story.category] = [story];
      		  }
      		});

      		// Build a vertical array of slides (section parent / section children)
      		// where the order is according to the categoryOrder

      		// This will be used to display a summary of the categories
          // covered in the cycle
      		var categoriesInCycle = [];

      		categoryOrder.forEach(function(category, i) {

	      		// ---------------
	      		// C A T E G O R Y
	      		// ---------------

      			// Are there any stories for the current category?
      			if (categoryStories.hasOwnProperty(category)) {

      				categoriesInCycle.push(category);

      				// Build slide for category
      				var $subsection = $("<section class='" + category + "'>");
      				$subsection.append("<h2>" + category + "</h2>");

      				// Add stories to the slide
      				categoryStories[category].forEach(function (story, i) {
      					$subsection.append(
      						"<p class='story'>As a <span class='actor'>" +
      						story.actor +
      						"</span> I want to <span class='action'>" +
      						story.action +
      						"</span> so that <span class='result'>" +
      						story.result +
      						"</span></p>"
      					);

      				});

              // Append the subsection (slide) for the category
      				$section.append($subsection);

      			}

      		});

          // Add to the 'header' slide a summary of the categories 
          // covered in this cycle
					$sectionheader.append("<p>Categories in this cycle:<br/>" + categoriesInCycle.join(", ") + "</p>");

      	  $(".slides").append($section);

      	});

      });

		</script>
	</body>
</html>
